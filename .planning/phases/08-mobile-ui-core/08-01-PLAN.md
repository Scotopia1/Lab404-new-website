# Plan 08-01: Mobile-First UI Optimization - Core Pages

**Phase:** 8 - Mobile-First UI Optimization - Core Pages
**Plan:** 08-01
**Objective:** Optimize homepage, product listing, and product detail pages for mobile devices with <3s load time on 3G

---

## Context

**Target Pages:**
- Homepage (`apps/lab404-website/src/app/page.tsx`)
- Product Listing (`apps/lab404-website/src/app/products/page.tsx`)
- Product Detail (`apps/lab404-website/src/app/products/[slug]/page.tsx`)

**Performance Targets:**
- <3s page load on mobile 3G
- Touch-friendly navigation (44x44px minimum tap targets)
- Optimized images (lazy loading, srcset, WebP)
- Responsive breakpoints: mobile (< 640px), tablet (640-1024px), desktop (> 1024px)

**Current State:**
- Pages exist and function
- May not be fully optimized for mobile
- Image optimization may be missing
- Mobile UX may need touch-friendly improvements

---

## Tasks

### Task 1: Audit current mobile performance
**What to do:**
- Use Lighthouse to measure mobile performance on all 3 pages
- Document current metrics (LCP, FID, CLS, TTI)
- Identify performance bottlenecks
- Document findings in `08-01-AUDIT.md`

**Success criteria:**
- Baseline metrics documented
- Bottlenecks identified (images, scripts, fonts, layout shifts)
- Recommendations prioritized

---

### Task 2: Optimize homepage for mobile
**Files:** `apps/lab404-website/src/app/page.tsx` and related components

**What to optimize:**
- Hero section: responsive sizing, mobile-optimized images
- Featured products: horizontal scroll on mobile, grid on desktop
- Image loading: add `loading="lazy"` and `srcset` for responsive images
- Touch targets: ensure all buttons/links are min 44x44px
- Layout shifts: reserve space for images/dynamic content
- Font loading: optimize web fonts with `font-display: swap`

**Success criteria:**
- Hero scales properly on all screen sizes
- Images load progressively with appropriate sizes
- No layout shifts during load
- All interactive elements touch-friendly

---

### Task 3: Optimize product listing for mobile
**Files:** `apps/lab404-website/src/app/products/page.tsx`

**What to optimize:**
- Product grid: 1 column on mobile, 2-3 on tablet, 3-4 on desktop
- Filters: mobile drawer/sheet instead of sidebar
- Image thumbnails: optimized sizes with lazy loading
- Infinite scroll or pagination: optimize for mobile
- Loading states: skeleton loaders for better perceived performance

**Success criteria:**
- Product grid responsive and touch-friendly
- Filters accessible on mobile (drawer/sheet)
- Images load efficiently
- Smooth scrolling experience

---

### Task 4: Optimize product detail for mobile
**Files:** `apps/lab404-website/src/app/products/[slug]/page.tsx`

**What to optimize:**
- Product images: image gallery optimized for mobile (swipe/carousel)
- Image zoom: touch-friendly pinch-to-zoom or modal
- Add to cart button: fixed bottom bar on mobile
- Product details: accordion/tabs for mobile, expanded on desktop
- Variant selection: touch-friendly size/color selectors
- Related products: horizontal scroll on mobile

**Success criteria:**
- Image gallery works smoothly on mobile
- Add to cart easily accessible (fixed or sticky)
- All interactions touch-friendly
- Content organized efficiently for small screens

---

### Task 5: Implement image optimization
**What to do:**
- Use Next.js Image component for automatic optimization
- Add responsive `srcset` for different screen sizes
- Implement lazy loading for below-the-fold images
- Consider WebP format with PNG/JPG fallbacks
- Add proper `width` and `height` to prevent layout shifts

**Example:**
```typescript
import Image from 'next/image';

<Image
  src="/images/product.jpg"
  alt="Product name"
  width={800}
  height={600}
  sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
  loading="lazy"
  placeholder="blur"
/>
```

**Success criteria:**
- All images use Next.js Image component
- Responsive sizes configured
- Lazy loading for below-fold images
- No layout shifts from images

---

### Task 6: Test on real mobile devices
**What to test:**
- iOS Safari (iPhone 12/13/14)
- Android Chrome (Samsung/Pixel)
- Performance metrics (Lighthouse mobile)
- Touch interactions (tap, swipe, pinch)
- Load time on simulated 3G

**Document in:** `.planning/phases/08-mobile-ui-core/08-01-TESTING.md`

**Success criteria:**
- <3s load time on 3G simulation
- Touch interactions smooth and responsive
- No horizontal scroll (unless intentional)
- All interactive elements work on touch devices
- Performance score >90 on Lighthouse mobile

---

## Verification

- [ ] Baseline performance audit completed
- [ ] Homepage optimized for mobile (responsive, touch-friendly, fast)
- [ ] Product listing optimized (grid, filters, images)
- [ ] Product detail optimized (gallery, add to cart, details)
- [ ] Images optimized (Next.js Image, lazy loading, srcset)
- [ ] Tested on iOS Safari and Android Chrome
- [ ] Load time <3s on 3G simulation
- [ ] Lighthouse mobile score >90
- [ ] All touch targets minimum 44x44px
- [ ] No layout shifts (CLS <0.1)

---

## Success Criteria

- [ ] Performance audit document created
- [ ] Homepage mobile-optimized and tested
- [ ] Product listing mobile-optimized and tested
- [ ] Product detail mobile-optimized and tested
- [ ] All images using Next.js Image with optimization
- [ ] Testing documentation with real device results
- [ ] Performance targets met (<3s load, >90 Lighthouse score)
- [ ] Touch-friendly UX throughout

---

## Output

**Files Created (2):**
1. `.planning/phases/08-mobile-ui-core/08-01-AUDIT.md` - Performance audit
2. `.planning/phases/08-mobile-ui-core/08-01-TESTING.md` - Mobile testing documentation

**Files Modified (3+):**
1. `apps/lab404-website/src/app/page.tsx` - Homepage mobile optimization
2. `apps/lab404-website/src/app/products/page.tsx` - Product listing mobile optimization
3. `apps/lab404-website/src/app/products/[slug]/page.tsx` - Product detail mobile optimization
4. Related component files (product cards, image galleries, filters, etc.)

**Estimated commits:** 6 tasks + 1 docs = 7 total
