# Plan 09-01: Mobile-First UI Optimization - Cart & Checkout

**Phase:** 9 - Mobile-First UI Optimization - Cart & Checkout
**Plan:** 09-01
**Objective:** Optimize cart and checkout flow for mobile devices to ensure smooth conversion path

---

## Context

**Target Pages/Components:**
- Cart drawer/sheet (shopping cart UI component)
- Checkout page (`apps/lab404-website/src/app/checkout/page.tsx`)
- Checkout success (`apps/lab404-website/src/app/checkout/success/page.tsx`)

**Critical Path:**
Cart → Checkout → Success is the conversion funnel - must be flawless on mobile

**Performance Targets:**
- Smooth touch interactions (no lag)
- Touch-friendly form inputs (mobile keyboards)
- Clear call-to-action buttons (prominent, easy to tap)
- Fast form validation (instant feedback)
- No accidental interactions (proper spacing)

**Current State:**
- Checkout flow works but may not be mobile-optimized
- Form inputs may need mobile-specific improvements
- Cart UI needs touch optimization

---

## Tasks

### Task 1: Optimize cart drawer/sheet for mobile
**Files:** Cart component (find and optimize)

**What to optimize:**
- Sheet/drawer: full-height on mobile, slide from right
- Product thumbnails: appropriate size for mobile
- Quantity controls: large touch targets (+ / - buttons)
- Remove button: prominent but safe from accidental taps
- Subtotal/total: sticky at bottom
- Checkout button: large, prominent, sticky
- Empty cart state: friendly message with continue shopping link

**Success criteria:**
- Cart opens smoothly on mobile
- All controls easy to tap (min 44x44px)
- Quantity adjustment works smoothly
- Checkout button always visible
- No accidental item removals

---

### Task 2: Optimize checkout form for mobile input
**Files:** `apps/lab404-website/src/app/checkout/page.tsx`, checkout form component

**What to optimize:**
- Input fields: proper `type` attributes (tel, email, text)
  - Email: `type="email"` triggers email keyboard
  - Phone: `type="tel"` triggers number pad
  - Postal code: `type="text" inputmode="numeric"`
- Field labels: clearly visible above inputs (not floating)
- Field spacing: adequate spacing between fields (prevent misclicks)
- Autofill: proper `autocomplete` attributes
  - `autocomplete="given-name"` for firstName
  - `autocomplete="family-name"` for lastName
  - `autocomplete="email"` for email
  - `autocomplete="tel"` for phone
  - `autocomplete="address-line1"` for addressLine1
  - `autocomplete="address-line2"` for addressLine2
  - `autocomplete="postal-code"` for postalCode
- Error messages: inline, clearly visible
- Field focus: proper keyboard navigation, focus indicators

**Success criteria:**
- Correct keyboard appears for each field
- Autofill works properly
- Error messages clear and visible
- Easy to navigate between fields
- No zooming when focusing inputs (font-size >= 16px)

---

### Task 3: Optimize checkout flow for mobile
**Files:** `apps/lab404-website/src/app/checkout/page.tsx`

**What to optimize:**
- Progress indicator: show steps (Shipping → Payment → Review)
- Saved addresses: easy to select on mobile (radio buttons, clear labels)
- Address form: collapsible sections if needed
- Order summary: collapsible on mobile, always visible on desktop
- Place order button: large, fixed at bottom on mobile
- Loading states: clear feedback during submission
- Success redirect: immediate feedback before redirect

**Success criteria:**
- Clear progress through checkout
- Saved addresses easy to select
- Order summary always accessible
- Place order button prominent and accessible
- Loading states prevent multiple submissions
- Success feedback immediate

---

### Task 4: Mobile-friendly address entry
**Files:** Address form components

**What to optimize:**
- Country selector: searchable dropdown for mobile
- State/province: conditional based on country
- Field grouping: logical sections (Name, Address, Contact)
- "Save address" checkbox: clear and easy to tap
- Default address toggle: clearly labeled
- Address type (shipping/billing): prominent selector

**Success criteria:**
- All fields mobile-optimized
- Country/state selection works smoothly
- Checkboxes easy to tap
- Clear field grouping and labels

---

### Task 5: Touch-friendly quantity controls
**Files:** Cart and checkout components with quantity selectors

**What to optimize:**
- Plus/minus buttons: large touch targets (44x44px minimum)
- Current quantity: clearly displayed between buttons
- Button spacing: prevent accidental taps
- Haptic feedback: visual feedback on tap
- Max quantity: disable + button at max
- Min quantity: disable - button at 1 (or remove item)

**Example:**
```typescript
<div className="flex items-center gap-2">
  <Button
    size="icon"
    variant="outline"
    className="h-11 w-11" // 44px for touch
    onClick={() => updateQuantity(item.id, item.quantity - 1)}
    disabled={item.quantity <= 1}
  >
    <Minus className="h-4 w-4" />
  </Button>
  <span className="w-12 text-center font-medium text-lg">
    {item.quantity}
  </span>
  <Button
    size="icon"
    variant="outline"
    className="h-11 w-11" // 44px for touch
    onClick={() => updateQuantity(item.id, item.quantity + 1)}
    disabled={item.quantity >= item.stock}
  >
    <Plus className="h-4 w-4" />
  </Button>
</div>
```

**Success criteria:**
- Quantity buttons easy to tap
- Visual feedback on interaction
- Disabled states clear
- No accidental quantity changes

---

### Task 6: Test complete checkout flow on mobile
**What to test:**
1. Add items to cart on mobile
2. Open cart, adjust quantities
3. Proceed to checkout
4. Fill shipping information (test autofill)
5. Select saved address (if applicable)
6. Review order
7. Place order
8. Verify success page

**Test on:**
- iOS Safari (iPhone)
- Android Chrome
- Different screen sizes (small phones, tablets)

**Document in:** `.planning/phases/09-mobile-ui-checkout/09-01-TESTING.md`

**Success criteria:**
- Entire flow works smoothly on mobile
- No issues with touch interactions
- Form inputs work correctly (keyboards, autofill)
- No accidental clicks or errors
- Fast and responsive throughout

---

## Verification

- [ ] Cart drawer/sheet optimized for mobile
- [ ] Checkout form inputs optimized (types, autocomplete, spacing)
- [ ] Checkout flow smooth and logical on mobile
- [ ] Address entry mobile-friendly
- [ ] Quantity controls touch-friendly
- [ ] Complete flow tested on iOS and Android
- [ ] All touch targets >= 44x44px
- [ ] Input fields >= 16px font size (no zoom)
- [ ] Loading states clear
- [ ] Error messages visible

---

## Success Criteria

- [ ] Cart UI works smoothly on mobile
- [ ] All form inputs have correct types and autocomplete
- [ ] Checkout flow is logical and easy on mobile
- [ ] Address selection/entry optimized for touch
- [ ] Quantity controls are touch-friendly
- [ ] Complete checkout flow tested end-to-end
- [ ] Testing documentation with real device results
- [ ] No usability issues on mobile
- [ ] Fast and responsive interactions

---

## Output

**Files Created (1):**
1. `.planning/phases/09-mobile-ui-checkout/09-01-TESTING.md` - Mobile checkout testing

**Files Modified (5+):**
1. Cart component (drawer/sheet) - Mobile optimization
2. `apps/lab404-website/src/app/checkout/page.tsx` - Checkout form optimization
3. `apps/lab404-website/src/app/checkout/success/page.tsx` - Success page mobile optimization
4. Address form components - Mobile input optimization
5. Quantity control components - Touch-friendly controls

**Estimated commits:** 6 tasks + 1 docs = 7 total
