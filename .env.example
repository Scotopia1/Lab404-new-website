# ===========================================
# Lab404Electronics Environment Configuration
# ===========================================

# Environment
NODE_ENV=development

# ===========================================
# Database (NeonDB)
# ===========================================
DATABASE_URL=postgresql://user:password@host.neon.tech/lab404?sslmode=require

# ===========================================
# Authentication (Neon Auth)
# ===========================================
NEON_AUTH_PROJECT_ID=your_project_id
NEON_AUTH_API_KEY=your_api_key

# JWT Configuration
# IMPORTANT: JWT_SECRET must be at least 32 characters (server validates on startup)
# Generate a secure secret: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-must-be-at-least-32-characters-long
JWT_EXPIRES_IN=7d

# CSRF Protection (Optional - uses JWT_SECRET if not set)
# CSRF_SECRET should be at least 32 characters
# Generate: openssl rand -base64 32
# CSRF_SECRET=your-csrf-secret-at-least-32-characters-long

# Admin User Setup
# Note: Admin login now uses database authentication (hardcoded credentials removed for security)
# To create an admin user:
# 1. Register a user account via /api/auth/register
# 2. Manually set role='admin' in the database customers table
# 3. Or run: UPDATE customers SET role='admin' WHERE email='admin@yourdomain.com';

# ===========================================
# ImageKit (File Storage)
# ===========================================
IMAGEKIT_PUBLIC_KEY=your_public_key
IMAGEKIT_PRIVATE_KEY=your_private_key
IMAGEKIT_URL_ENDPOINT=https://ik.imagekit.io/your_id

# ===========================================
# Email (SMTP)
# ===========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
# Optional: Set custom FROM email and name (defaults to SMTP_USER if not set)
SMTP_FROM_EMAIL=your_email@gmail.com
SMTP_FROM_NAME=Lab404 Electronics

# Email Notifications
# After configuring SMTP above, set up email notifications:
#
# Customer Order Confirmation:
#   - Automatically sent to customer email provided at checkout
#   - Includes order details, items, pricing, and COD payment instructions
#   - No additional configuration needed
#
# Admin Order Notifications:
#   - Sent when new orders are placed (if orderNotificationEmail is configured)
#   - Configure via Admin Dashboard → Settings → Store Settings
#   - Or via API: PUT /api/settings
#     {
#       "store": {
#         "orderNotificationEmail": "orders@lab404electronics.com"
#       }
#     }
#
# Email Delivery Notes:
#   - Emails sent asynchronously (don't block order creation)
#   - Email failures logged but won't affect order processing
#   - If SMTP not configured, emails silently fail with warning in logs

# ===========================================
# Stripe (Payment - Future)
# ===========================================
STRIPE_SECRET_KEY=sk_test_xxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxx

# ===========================================
# Application URLs
# ===========================================
API_URL=http://localhost:4000
API_PORT=4000
ADMIN_URL=http://localhost:3001
WEB_URL=http://localhost:3000

# ===========================================
# CORS Configuration
# ===========================================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ===========================================
# Rate Limiting
# ===========================================
# Rate limits are enforced per IP address:
# - Auth endpoints: 5 req/15min (prod), 20 req/15min (dev)
# - General API: 30 req/min
# - Strict endpoints (checkout): 10 req/min
# - Default: 100 req/min
#
# Optional: Use Redis for distributed rate limiting
# REDIS_URL=redis://localhost:6379

# ===========================================
# Store Settings
# ===========================================
STORE_NAME=Lab404Electronics
STORE_CURRENCY=USD

# Tax Configuration
# Tax settings are managed via database (no env variables needed)
# To configure tax:
# 1. Use Admin Dashboard → Settings → Tax
# 2. Or API: PUT /api/settings with tax object: { tax: { tax_enabled: true, tax_rate: 11, tax_label: "VAT" } }
# 3. Tax rate is percentage (0-100), e.g., 11 for 11%
#
# Default: tax_enabled=false, tax_rate=0 (no tax applied)

# ===========================================
# Cron Job Security
# ===========================================
# IMPORTANT: CRON_SECRET must be at least 32 characters
# Generate a secure secret: openssl rand -base64 32
# Required for all cron job endpoints (no dev bypass)
CRON_SECRET=your-cron-secret-must-be-at-least-32-characters-long

# ===========================================
# Google APIs (Image Search)
# ===========================================
GOOGLE_API_KEY=your_google_api_key
GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id
